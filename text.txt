#include <stdio.h>
#include "headers/info.h"
#include "headers/produits.h"

int acheterProduit(struct produits List[], int taille, struct info *Client, int idProduit, int quantite) {

    if (Client->idClient == 0){
        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return 0;
    }

    int productIndex = -1;
    for(int i = 0; i < taille; i++) {
        if(List[i].idProduit == idProduit) {
            productIndex = i;
            break;
        }
    }
    
    if(productIndex == -1) {
        printf("Produit non trouve!\n");
        return 0;
    }
    
    if(List[productIndex].stock < quantite) {
        printf("Stock insuffisant! Stock disponible: %d\n", List[productIndex].stock);
        return 0;
    }
    
    float totalCost = List[productIndex].prix * quantite;
    
    if(Client->solde < totalCost) {
        printf("Solde insuffisant! Coût total: %.2f, Votre solde: %.2f\n", 
               totalCost, Client->solde);
        return 0;
    }
    
    List[productIndex].stock -= quantite;
    Client->solde -= totalCost;
    
    printf("\nAchat réussi!\n");
    printf("Produit: %s\n", List[productIndex].nomProduit);
    printf("Quantité: %d\n", quantite);
    printf("Coût total: %.2f\n", totalCost);
    printf("Nouveau solde: %.2f\n", Client->solde);
    printf("Stock restant: %d\n", List[productIndex].stock);
    
    return 1;
}#include <stdio.h>
#include <string.h>
#include "headers/info.h"

int check_valid_name(char *str, char *type)
{
    int i;

    i = 0;
    while (str[i])
    {
        if (!((str[i] >= 'a' && str[i] <= 'z') || (str[i] >= 'A' && str[i] <= 'Z')))
        {
            printf ("Invalide %s (%s containe only alphabic characters)\n", type, type);
            return (1);
        }
        i++;
    }
    return 0;
}

void addInfo(struct info *Client) {

    Client->idClient = 1;

    do {
        printf("\nEntrez voter nom: ");
        scanf("%29s", Client->nom);
    } while (check_valid_name(Client->nom, "nom"));

    do {
        printf("\nEntrez voter prenom: ");
        scanf("%29s", Client->prenom);
    } while (check_valid_name(Client->prenom, "prenome"));


    printf("\nEntrez voter solde: ");
    scanf("%f", &Client->solde);

}#include <stdio.h>
#include "headers/info.h"


void editInfo(struct info *Client) {

    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }

    int choix;

    printf("1. Modification du nom: %s", Client->nom);
    printf("\t\n");
    printf("2. Modification du prenom: %s", Client->prenom);
    printf("\t\n");
    printf("3. Modification du email: %s", Client->email);

    printf("\nEntez vos choix: ");
    scanf("%d", &choix);

    switch(choix) {
        case 1:
            printf("\nEntrez voter nouveau nom: ");
            scanf("%s", Client->nom);
            break;
        case 2:
            printf("\nEntrez voter nouveau prenom: ");
            scanf("%s", Client->prenom);
            break;
        case 3:
            printf("\nEntrez voter nouveau email: ");
            scanf("%s", Client->email);
            break;
        default:
            printf("\nChoix invalide!\n");
            break;
    }
}#include <stdio.h>
#include <ctype.h>
#include "headers/info.h"

void emailGen(struct info *Client){

    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }

    for (int i = 0; Client->prenom[i] != '\0';i++){
        Client->prenom[i] = tolower(Client->prenom[i]);
    }

    for (int i = 0; Client->nom[i] != '\0';i++){
        Client->nom[i] = tolower(Client->nom[i]);
    }

    sprintf(Client->email, "%s.%s@email.com", Client->prenom, Client->nom);

    printf("\nVoter email est: '%s'\nAvec ID: %0.4d\n", Client->email, Client->idClient);

}#include <stdio.h>
#include "headers/info.h"
#include "headers/produits.h"
#include "headers/menu.h"

int main() {
    struct info Client = {0};
    struct produits List[10] = {
        {1, 20, "MacBook_Pro_16", "Laptops", "Apple MacBook Pro 16 pouces avec puce M3 Pro.", 2499.99},
        {2, 25, "Dell_XPS_15", "Laptops", "Dell XPS 15 avec écran InfinityEdge et i7.", 1899.99},
        {3, 30, "Lenovo_ThinkPad_X1_Carbon", "Laptops", "Portable professionnel durable et léger.", 1799.99},
        {4, 50, "iPhone_15_Pro_Max", "Phones", "iPhone 15 Pro Max avec A17 Pro chip et triple caméra.", 1399.99},
        {5, 40, "Samsung_Galaxy_S24_Ultra", "Phones", "Samsung Galaxy S24 Ultra avec S-Pen et 200MP caméra.", 1299.99},
        {6, 35, "Google_Pixel_8_Pro", "Phones", "Google Pixel 8 Pro avec IA intégrée et super caméra.", 1099.99},
        {7, 60, "OnePlus_12", "Phones", "OnePlus 12 avec écran 120Hz et recharge rapide.", 899.99},
        {8, 40, "iPad_Pro_12.9", "Tablets", "Apple iPad Pro avec puce M2 et Apple Pencil 2 support.", 1199.99},
        {9, 30, "Samsung_Galaxy_Tab_S9_Ultra", "Tablets", "Tablette Samsung AMOLED 14 pouces, ultra fine.", 999.99},
        {10, 20, "Microsoft_Surface_Pro_9", "Tablets", "Tablette hybride avec clavier détachable et Windows 11.", 1299.99}
};


    menuPrincipale(&Client, List, 10);

    return 0;
}#include <stdio.h>
#include "headers/info.h"
#include "headers/produits.h"
#include "headers/menu.h"

void menuAchat(struct info *Client, struct produits List[], int taille) {

    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }

    int idProduit, quantite;
    
    printf("\n=== EFFECTUER UN ACHAT ===\n");
    
    produitList(List, taille);
    
    idProduit = searchProduit(List, taille);

    //printf("\nEntrez l'ID du produit à acheter (0 pour annuler): ");
    //scanf("%d", &idProduit);
    
    if(idProduit == 0) {
        return;
    }
    
    printf("Entrez la quantité souhaitée: ");
    scanf("%d", &quantite);
    
    acheterProduit(List, taille, Client, idProduit, quantite);
}#include <stdio.h>
#include <stdlib.h>
#include "headers/info.h"
#include "headers/produits.h"
#include "headers/menu.h"

void menuPrincipale(struct info *Client, struct produits List[], int taille) {
    while (1) {
        printf("=== SYSTÈME D'ACHAT CLIENT ===\n");
        printf("\t\n");

        printf("1. Gestion du profil\n");
        printf("2. Gestion du solde virtuel\n");
        printf("3. Consultation des produits\n");
        printf("4. Effectuer un achat\n");
        printf("5. Mes statistiques\n");
        printf("0. Quitter l'application\n");
        printf("\t\n");

        int choix;

        printf("Entrez votre choix: ");
        scanf("%d", &choix);

        switch(choix) {
            case 0:
                system("clear");
                printf("Au revoir! Merci d'avoir utilisé notre service.\n");
                return;
            case 1:
                system("clear");
                menuProfile(Client);
                break;
            case 2:
                system("clear");
                solde(Client);
                break;
            case 3:
                system("clear");
                produitList(List, taille);
                break;
            case 4:
                system("clear");
                menuAchat(Client, List, taille);
                break;
            case 5:
                system("clear");
                afficherStatistiques(Client);
                break;
            default:
                system("clear");
                printf("Choix invalide! Veuillez réessayer.\n");
                break;
        }
    }
}#include <stdio.h>
#include <stdlib.h>
#include "headers/info.h"
#include "headers/menu.h"

void menuProfile(struct info *Client){

    printf("\n===GESTION DU PROFIL===\n");
    printf("\t\n");
  
    printf("1. Création de profil\n");
    printf("2. Modification du profil\n");
    printf("3. Consultation du profil\n");
    printf("4. Génération email\n");
    printf("0. Retourn\n");
    printf("\t\n");

    int choix;

    printf("Entrez votre choix: ");
    scanf("%d",&choix);

    switch(choix){
        case 0:
            system("clear");
            return;
        case 1:
            addInfo(Client);
            break;
        case 2:
            editInfo(Client);
            break;
        case 3:
            showInfo(Client);
            break;
        case 4:
            emailGen(Client);
            break;
        default:
            system("clear");
            printf("Choix invalide!\n");
           
 break;
    }  

}
#include <stdio.h>
#include "headers/produits.h"

void produitList(struct produits List[], int taille) {

    printf("\n======= Catalogue Produits =======\n");
    int i;
    for (i = 0; i < taille; i++) {
        printf("\nID: %d\n", List[i].idProduit);
        printf("Nom: %s\n", List[i].nomProduit);
        printf("Catégorie: %s\n", List[i].categorie);
        printf("Prix: %.2f MAD\n", List[i].prix);
        printf("Stock: %d\n", List[i].stock);
        printf("Description: %s\n", List[i].description);
    }


}#include <stdio.h>
#include <string.h>
#include "headers/info.h"
#include "headers/produits.h"

int searchProduit(struct produits List[], int taille) {


    int choix;
    printf("\n=== RECHERCHE PRODUIT ===\n");
    printf("0. Par Nom\n");
    printf("1. Par Categorie\n");
    printf("Votre choix: ");
    scanf("%d", &choix);

    int found = 0;

    if (choix == 0) {
        char name[30];
        printf("\n--- Recherche par Nom ---\n");
        printf("Entrez le nom du produit: ");
        scanf("%29s", name);

        for (int i = 0; i < taille; i++) {
            if (strcasecmp(List[i].nomProduit, name) == 0) {
                printf("\nID: %d\nNom: %s\nCategorie: %s\nPrix: %.2f MAD\nStock: %d\nDescription: %s\n",
                       List[i].idProduit,
                       List[i].nomProduit,
                       List[i].categorie,
                       List[i].prix,
                       List[i].stock,
                       List[i].description);
                found = 1;
                return List[i].idProduit;
            }
        }
        if (!found) {
            printf("Aucun produit trouve avec le nom '%s'.\n", name);
        }
    }
    else if (choix == 1) {
        char cat[30];
        printf("\n--- Recherche par Categorie ---\n");
        printf("Entrez la categorie: ");
        scanf("%29s", cat);

        for (int i = 0; i < taille; i++) {
            if (strcasecmp(List[i].categorie, cat) == 0) {
                printf("\nID: %d\nNom: %s\nCategorie: %s\nPrix: %.2f MAD\nStock: %d\nDescription: %s\n",
                       List[i].idProduit,
                       List[i].nomProduit,
                       List[i].categorie,
                       List[i].prix,
                       List[i].stock,
                       List[i].description);
                found = 1;
                return List[i].idProduit;
            }
        }
        if (!found) {
            printf("Aucun produit trouve dans la categorie '%s'.\n", cat);
        }
    }
    else {
        printf("Choix invalide.\n");
    }
}
#include <stdio.h>
#include "headers/info.h"

void showInfo(struct info *Client) {
    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }
    printf("\n=== INFORMATION DU PROFIL ===\n");
    printf("ID Client: %d\n", Client->idClient);
    printf("Nom: %s\n", Client->nom);
    printf("Prénom: %s\n", Client->prenom);
    printf("Email: %s\n", Client->email);
    printf("Solde: %.2f MAD\n", Client->solde);
    printf("\nAppuyez sur Entrée pour continuer...");
    getchar();
    getchar();
}#include <stdio.h>
#include "headers/info.h"
#include "headers/produits.h"

void afficherStatistiques(struct info *Client) {
    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }
    printf("\n=== MES STATISTIQUES ===\n");
    printf("ID Client: %d\n", Client->idClient);
    printf("Solde actuel: %.2f MAD\n", Client->solde);
}#include <stdio.h>
#include "headers/info.h"

void solde(struct info *Client) {
    if (Client->idClient == 0){

        printf("Tu doit cree votre compte!\n");
        printf("\t\n");
        return ;

    }
    int choix;
    float montant;

    printf("\n=== GESTION DU SOLDE ===\n");
    printf("1. Consulter le solde\n");
    printf("2. Déposer de l'argent\n");
    printf("0. Retour\n");
    
    printf("\nVotre choix: ");
    scanf("%d", &choix);

    switch(choix) {
        case 0:
            return;
        case 1:
            printf("\nVotre solde actuel est: %.2f MAD\n", Client->solde);
            break;
        case 2:
            printf("\nMontant à déposer: ");
            scanf("%f", &montant);
            if(montant > 0) {
                Client->solde += montant;
                printf("Dépôt réussi! Nouveau solde: %.2f MAD\n", Client->solde);
            } else {
                printf("Montant invalide!\n");
            }
            break;
        default:
            printf("Choix invalide!\n");
            break;
    }
}